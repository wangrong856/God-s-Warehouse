<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

       var obj={
        name:"zs",
        age:34,
        sex:"男"
       }


    //    Object.defineProperty(对象,拦截的对象属性,{
    //      get(){return xx},  //访问拦截的属性就会执行get方法，返回值是获取到的值
    //      set(v){}  //设置新值就会执行此方法，v就是设置的新值
    //    })

    //  var _name="zs"
    //   Object.defineProperty(obj,'name',{
    //     get(){
    //         return _name
    //     },
    //     set(v){
    //         _name=v
    //     }
    //   })

    //   通过劫持的方法把每一个属性都变成setter和getter的形式

    Object.keys(obj).forEach(key=>{
        defineReactive(obj,key,obj[key])
    })


    //  响应转化方法--闭包
    function defineReactive(data,key,value){
        let value=""
        Object.defineProperty(data,key,{
            get(){
                return value
            },
            set(v){
                value=v
            }
        })
    }

/* 
data:{
    obj:{
        name:"zs",
        obj:{
            n:9
        }
    }
}


响应式总结
  1.所谓的响应式就是拦截对象属性的访问和设置，插入一些我们自己想要做的事情
  2.js中实现响应式拦截的方法有 Object.DefineProperty 和 Proxy(劫持对象整体+惰性处理)对象代理
  3：vue中data里的数据，不管层级多深不管你最终会不会用到这个数据都会进行递归响应式处理
     如非必要，尽量不要添加太多的冗余数据在data中

*/



    </script>
</body>
</html>